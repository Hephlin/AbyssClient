package me.ciruu.abyss.modules.exploit;

import java.util.function.Predicate;

import me.ciruu.abyss.enums.Category;
import me.ciruu.abyss.events.network.EventNetworkPostPacketEvent;
import me.ciruu.abyss.modules.Module;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;

public class NoHunger
extends Module {
    @EventHandler
    private Listener Field2172 = new Listener<EventNetworkPostPacketEvent>(NoHunger::Method2648, new Predicate[0]);

    public NoHunger() {
        super("NoHunger", "", Category.EXPLOIT, "");
    }
    private static void Method2648(EventNetworkPostPacketEvent eventNetworkPostPacketEvent) {
        if (eventNetworkPostPacketEvent.getPacket() instanceof CPacketPlayer) {
            CPacketPlayer cPacketPlayer = (CPacketPlayer) eventNetworkPostPacketEvent.getPacket();
            boolean bl = cPacketPlayer.isOnGround();
            if(cPacketPlayer.moving) {
                bl = true;
            }
        }

        // Second block: Handle CPacketEntityAction
        if (eventNetworkPostPacketEvent.getPacket() instanceof CPacketEntityAction) {
            CPacketEntityAction packet = (CPacketEntityAction) eventNetworkPostPacketEvent.getPacket();
            if (packet.getAction() == CPacketEntityAction.Action.START_SPRINTING
                    || packet.getAction() == CPacketEntityAction.Action.STOP_SPRINTING) {
                eventNetworkPostPacketEvent.cancel();
            }
        }
    }

}
